<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Gamedev Canvas Workshop</title>

<!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
    <style>
    	* { padding: 0; margin: 0; }
    	canvas { background: #eee; display: block; margin: 0 auto;}
    </style>
</head>
<body>
    
    <div class="container">
        <div class="row">
            <div class="col" id="col-left">
                <h3 class='scoreboard'></h3>
                <div class="left-half"></div>
            </div>
            <div class="col-9">
                <h1 class="title">Rick and Morty Pong</h1>
                <canvas id="myCanvas" width="550" height="420"></canvas>
            </div>
            <div class="col" id="col-right">
                <h3 class='lifecount'></h3>
                <div class="right-half"></div>
            </div>
        </div>
    </div>

    <div class='button-container'>
        <button class="btn btn-primary" id="start" type="submit">Start Game!</button>
        <button class="btn btn-primary" id="how-to-play" type="submit">How To Play</button>
    </div>

    <div class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">How To Play</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p>1. User will start game by clicking a start game button in the middle of the screen</p>
              <p>2. Once user has clicked start, they will be introduced to a normal game of pong where they start on level 1 with 5 lives</p>
              <p>3. The user will have to move through each level and try to destroy all the bricks on the level, while controlling the paddle with the left and right arrow keys or their mouse</p>
              <p>4. Once, all the bricks on the level are destroyed, the user will move onto the next level, where the game gets harder</p>
              <p>5. Once the user reaches level 3, they have finally won the game and you get the option to restart</p>
              <p>6. However, if the user loses all 5 lives, the game is officially over and will restart</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
            </div>
          </div>
        </div>
      </div>
    




<script>
    // JavaScript code goes here 
    

const canvas = document.getElementById("myCanvas");
const ctx = canvas.getContext("2d");
// Game Board
let x = canvas.width/2;
let y = canvas.height-30;
let x2 = canvas.width/4;
let y2 = canvas.height-20;
let x3 = canvas.width/6;
let y3 = canvas.height-10;
let dx = 2;
let dy = -2;
let dx2 = 4;
let dy2 = -4;
let dx3 = 5;
let dy3 = -5;
// Ball Size
let ballRadius = 10;
// Paddle Control
let paddleHeight = 10;
let paddleWidth = 75;
let paddleX = (canvas.width - paddleWidth) / 2;
let rightPressed = false;
let leftPressed = false;
// Brick Variables
let brickRowCount = 3;
let brickColumnCount = 5;
let brickWidth = 80;
let brickHeight = 20;
let brickPadding = 10;
let brickOffsetTop = 30;
let brickOffsetLeft = 50;
// Scoreboard
let score = 0;
// Lives
let lives = 5;
// Current level
let currentLevel = 1;

let bricks = [];
for(let c = 0; c < brickColumnCount; c++) {
    bricks[c] = [];
    //CHANGE FOR EASY TESTING CHANGE BACK TO brickRowCount
    for(let r = 0; r < brickRowCount; r++) {
        bricks[c][r] = { x: 0, y: 0, status: 1 };
    }
}

let level2Bricks = [];
for(let c = 0; c < brickColumnCount; c++) {
    level2Bricks[c] = [];
    for(let r = 0; r < brickRowCount; r++) {
        level2Bricks[c][r] = { x: 0, y: 0, status: 1 };
    }
}

let level3Bricks = [];
for(let c = 0; c < brickColumnCount; c++) {
    level3Bricks[c] = [];
    for(let r = 0; r < brickRowCount; r++) {
        level3Bricks[c][r] = { x: 0, y: 0, status: 2 };
    }
}



document.addEventListener("keydown", keyDownHandler, false);
document.addEventListener("keyup", keyUpHandler, false);
document.addEventListener("mousemove", mouseMoveHandler, false);


// Mouse Control Function
function mouseMoveHandler(e) {
    let relativeX = e.clientX - canvas.offsetLeft;
    if(relativeX > 0 && relativeX < canvas.width) {
        paddleX = relativeX - paddleWidth/2;
    }
}

// Press Key Functions
function keyDownHandler(e) {
    if(e.keyCode == 39) {
        rightPressed = true;
    }
    else if(e.keyCode == 37) {
        leftPressed = true;
    }
}

function keyUpHandler(e) {
    if(e.keyCode == 39) {
        rightPressed = false;
    }
    else if(e.keyCode == 37) {
        leftPressed = false;
    }
}

// Brick Collision Function
function collisionDetection() {
    for(let c=0; c<brickColumnCount; c++) {
        for(let r=0; r<brickRowCount; r++) {
            let b = bricks[c][r];
            if(b.status == 1){
                if(x > b.x && x < b.x+brickWidth && y > b.y && y < b.y+brickHeight) {
                    dy = -dy;
                    b.status = 0;
                    score++;
                    $('.score').text("Score: " + score + " ");
                    if(score == brickRowCount*brickColumnCount) {
                        alert("YOU BEAT LEVEL 1! GET READY FOR LEVEL 2!");
                        currentLevel++;
                        drawLevel2();
                    }
                }
            }
        }
    }
}


// Brick Collision Function Level 2
function collisionDetectionLevel2() {
    for(let c=0; c<brickColumnCount; c++) {
        for(let r=0; r<brickRowCount; r++) {
            let b = level2Bricks[c][r];
            if(b.status == 1){
                if(x > b.x && x < b.x+brickWidth && y > b.y && y < b.y+brickHeight) {
                    dy = -dy;
                    b.status = 0;
                    score++;
                    $('.score').text("Score: " + score + " ");
                    if(score == ((brickRowCount*brickColumnCount)*2)) {
                        alert("YOU BEAT LEVEL 2! GET READY FOR THE FINAL LEVEL!");
                        currentLevel++
                        drawLevel3();
                    }
                }
            }
        }
    }
    for(let c=0; c<brickColumnCount; c++) {
        for(let r=0; r<brickRowCount; r++) {
            let b = level2Bricks[c][r];
            if(b.status == 1){
                if(x2 > b.x && x2 < b.x+brickWidth && y2 > b.y && y2 < b.y+brickHeight) {
                    dy2 = -dy2;
                    b.status = 0;
                    score++;
                    $('.score').text("Score: " + score + " ");
                    if(score == ((brickRowCount*brickColumnCount)*2)) {
                        alert("YOU BEAT LEVEL 2! GET READY FOR THE FINAL LEVEL!");
                        currentLevel++
                        drawLevel3();
                    }
                }
            }
        }
    }
}


// Brick Collision Function Level 3
function collisionDetectionLevel3() {
    for(let c=0; c<brickColumnCount; c++) {
        for(let r=0; r<brickRowCount; r++) {
            let b = level3Bricks[c][r];
            if(b.status > 0){
                if(x > b.x && x < b.x+brickWidth && y > b.y && y < b.y+brickHeight) {
                    dy = -dy;
                    b.status--;
                    score++;
                    $('.score').text("Score: " + score + " ");
                    if(score == ((brickRowCount*brickColumnCount)*4)) {
                        alert("YOU BEAT THE GAME! CONGRATULATIONS!");
                        document.location.reload();
                        // currentLevel++;
                        // drawLevel4();
                    }
                }
            }
        }
    }
    for(let c=0; c<brickColumnCount; c++) {
        for(let r=0; r<brickRowCount; r++) {
            let b = level3Bricks[c][r];
            if(b.status > 0){
                if(x2 > b.x && x2 < b.x+brickWidth && y2 > b.y && y2 < b.y+brickHeight) {
                    dy2 = -dy2;
                    b.status--;
                    score++;
                    $('.score').text("Score: " + score + " ");
                    if(score == ((brickRowCount*brickColumnCount)*4)) {
                        alert("YOU BEAT THE GAME! CONGRATULATIONS!");
                        // currentLevel++;
                        // drawLevel4();
                    }
                }
            }
        }
    }
    for(let c=0; c<brickColumnCount; c++) {
        for(let r=0; r<brickRowCount; r++) {
            let b = level3Bricks[c][r];
            if(b.status > 0){
                if(x3 > b.x && x3 < b.x+brickWidth && y3 > b.y && y3 < b.y+brickHeight) {
                    dy3 = -dy3;
                    b.status--;
                    score++;
                    $('.score').text("Score: " + score + " ");
                    if(score == ((brickRowCount*brickColumnCount)*4)) {
                        alert("YOU BEAT THE GAME! CONGRATULATIONS!");
                        document.location.reload();
                        // currentLevel++;
                        // drawLevel4();
                    }
                }
            }
        }
    }
}


// Scoreboard Function
function drawScore() {
    ctx.font = "16px Arial";
    ctx.fillStyle = "#0095DD";
    ctx.fillText("Score: "+score, 8, 20);
}


// Lives Function
function drawLives() {
    ctx.font = "16px Arial";
    ctx.fillStyle = "#0095DD";
    ctx.fillText("Lives: "+lives, canvas.width-65, 20);
}

// Creating Ball
function drawBall() {
    ctx.beginPath();
    ctx.arc(x, y, ballRadius, 0, Math.PI*2);
    ctx.fillStyle = "#0095DD";
    ctx.fill();
    ctx.closePath();
}

// Create Second Ball
function drawBall2() {
    ctx.beginPath();
    ctx.arc(x2, y2, ballRadius, 0, Math.PI*2);
    ctx.fillStyle = "#FF0000";
    ctx.fill();
    ctx.closePath();
}


// Create Third Ball
function drawBall3() {
    ctx.beginPath();
    ctx.arc(x3, y3, ballRadius, 0, Math.PI*2);
    ctx.fillStyle = "#00A500";
    ctx.fill();
    ctx.closePath();
}


// Create Paddle
function drawPaddle() {
    ctx. beginPath();
    ctx.rect(paddleX, canvas.height-paddleHeight, paddleWidth, paddleHeight);
    ctx.fillStyle = "#0095DD";
    ctx.fill();
    ctx.closePath();
}

// Level 2 Paddle
function drawPaddle2() {
    ctx. beginPath();
    ctx.rect(paddleX, canvas.height-paddleHeight, paddleWidth+20, paddleHeight);
    ctx.fillStyle = "#0095DD";
    ctx.fill();
    ctx.closePath();
}


// Level 3 Paddle
function drawPaddle3() {
    ctx. beginPath();
    ctx.rect(paddleX, canvas.height-paddleHeight, paddleWidth+40, paddleHeight);
    ctx.fillStyle = "#0095DD";
    ctx.fill();
    ctx.closePath();
}


// Create Bricks
function drawBricks() {
    for(let c = 0; c < brickColumnCount; c++) {
        for(let r = 0; r < brickRowCount; r++) {
            if(bricks[c][r].status == 1){
                let brickX = (c * (brickWidth+brickPadding)) + brickOffsetLeft;
                let brickY = (r * (brickHeight+brickPadding)) + brickOffsetTop;
                bricks[c][r].x = brickX;
                bricks[c][r].y = brickY;
                ctx.beginPath();
                ctx.rect(brickX, brickY, brickWidth, brickHeight);
                ctx.fillStyle = "#000000";
                ctx.fill();
                ctx.closePath();
            } 
        }
    }
}


// Level 2 Bricks
function drawBricksLevel2() {
    for(let c = 0; c < brickColumnCount; c++) {
        for(let r = 0; r < brickRowCount; r++) {
            if(level2Bricks[c][r].status == 1){
                let brickX = (c * (brickWidth+brickPadding)) + brickOffsetLeft;
                let brickY = (r * (brickHeight+brickPadding)) + brickOffsetTop;
                level2Bricks[c][r].x = brickX;
                level2Bricks[c][r].y = brickY;
                ctx.beginPath();
                ctx.rect(brickX, brickY, brickWidth, brickHeight);
                ctx.fillStyle = "#000000";
                ctx.fill();
                ctx.closePath();
            } 
        }
    }
}


// Level 3 Bricks
function drawBricksLevel3() {
    for(let c = 0; c < brickColumnCount; c++) {
        for(let r = 0; r < brickRowCount; r++) {
            if(level3Bricks[c][r].status == 2){
                let brickX = (c * (brickWidth+brickPadding)) + brickOffsetLeft;
                let brickY = (r * (brickHeight+brickPadding)) + brickOffsetTop;
                level3Bricks[c][r].x = brickX;
                level3Bricks[c][r].y = brickY;
                ctx.beginPath();
                ctx.rect(brickX, brickY, brickWidth, brickHeight);
                ctx.fillStyle = "#000000";
                ctx.fill();
                ctx.closePath();
            } 
            if(level3Bricks[c][r].status == 1){
                let brickX = (c * (brickWidth+brickPadding)) + brickOffsetLeft;
                let brickY = (r * (brickHeight+brickPadding)) + brickOffsetTop;
                level3Bricks[c][r].x = brickX;
                level3Bricks[c][r].y = brickY;
                ctx.beginPath();
                ctx.rect(brickX, brickY, brickWidth, brickHeight);
                ctx.fillStyle = "#FFFF00";
                ctx.fill();
                ctx.closePath();
            }
        }
    }
}


// Draw Functions 
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawBricks();
    drawBall();
    drawPaddle();
    // drawScore();
    // drawLives();
    collisionDetection();
    
    if(x + dx > canvas.width-ballRadius || x + dx < ballRadius) {
        dx = -dx;
    }
    if(y + dy < ballRadius) {
        dy = -dy;
    }
    else if(y + dy > canvas.height-ballRadius) {
        if(x > paddleX && x < paddleX + paddleWidth) {
            dy = -dy;
        }
        else {
            lives--;
            $('.lives').text("Lives: " + lives + "");
            if(!lives) {
                alert("GAME OVER");
                document.location.reload();
            }
            else {
                x = canvas.width/2;
                y = canvas.height-30;
                dx = 2;
                dy = -2;
                paddleX = (canvas.width-paddleWidth)/2;
            }
        }
    }
    
    if(rightPressed && paddleX < canvas.width-paddleWidth) {
        paddleX += 7;
    }
    else if(leftPressed && paddleX > 0) {
        paddleX -= 7;
    }
    
    x += dx;
    y += dy;
    if(currentLevel == 1){
        requestAnimationFrame(draw);
    }
}

function drawLevel2() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawBricksLevel2();
    drawBall();
    drawBall2();
    drawPaddle2();
    // drawScore();
    // drawLives();
    collisionDetectionLevel2();
    
    if(x + dx > canvas.width-ballRadius || x + dx < ballRadius) {
        dx = -dx;
    }
    if(y + dy < ballRadius) {
        dy = -dy;
    }
    else if(y + dy > canvas.height-ballRadius) {
        if(x > paddleX && x < paddleX + paddleWidth) {
            dy = -dy;
        }
        else {
            lives--;
            $('.lives').text("Lives: " + lives + "");
            if(!lives) {
                alert("GAME OVER");
                document.location.reload();
            }
            else {
                x = canvas.width/2;
                y = canvas.height-30;
                dx = 2;
                dy = -2;
                paddleX = (canvas.width-paddleWidth)/2;
            }
        }
    }
    if(x2 + dx2 > canvas.width-ballRadius || x2 + dx2 < ballRadius) {
        dx2 = -dx2;
    }
    if(y2 + dy2 < ballRadius) {
        dy2 = -dy2;
    }
    else if(y2 + dy2 > canvas.height-ballRadius) {
        if(x2 > paddleX && x2 < paddleX + paddleWidth) {
            dy2 = -dy2;
        }
        else {
            lives--;
            $('.lives').text("Lives: " + lives + "");
            if(!lives) {
                alert("GAME OVER");
                document.location.reload();
            }
            else {
                x2 = canvas.width/4;
                y2 = canvas.height-20;
                dx2 = 4;
                dy2 = -4;
                paddleX = (canvas.width-paddleWidth)/2;
            }
        }
    }

    if(rightPressed && paddleX < canvas.width-paddleWidth) {
        paddleX += 7;
    }
    else if(leftPressed && paddleX > 0) {
        paddleX -= 7;
    }
    
    x += dx;
    y += dy;
    x2 += dx2;
    y2 += dy2;
    if(currentLevel == 2){
        requestAnimationFrame(drawLevel2);
    }
}

function drawLevel3() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawBricksLevel3();
    drawBall();
    drawBall2();
    drawBall3();
    drawPaddle3();
    // drawScore();
    // drawLives();
    collisionDetectionLevel3();
    
    if(x + dx > canvas.width-ballRadius || x + dx < ballRadius) {
        dx = -dx;
    }
    if(y + dy < ballRadius) {
        dy = -dy;
    }
    else if(y + dy > canvas.height-ballRadius) {
        if(x > paddleX && x < paddleX + paddleWidth) {
            dy = -dy;
        }
        else {
            lives--;
            $('.lives').text("Lives: " + lives + "");
            if(!lives) {
                alert("GAME OVER");
                document.location.reload();
            }
            else {
                x = canvas.width/2;
                y = canvas.height-30;
                dx = 2;
                dy = -2;
                paddleX = (canvas.width-paddleWidth)/2;
            }
        }
    }
    if(x2 + dx2 > canvas.width-ballRadius || x2 + dx2 < ballRadius) {
        dx2 = -dx2;
    }
    if(y2 + dy2 < ballRadius) {
        dy2 = -dy2;
    }
    else if(y2 + dy2 > canvas.height-ballRadius) {
        if(x2 > paddleX && x2 < paddleX + paddleWidth) {
            dy2 = -dy2;
        }
        else {
            lives--;
            $('.lives').text("Lives: " + lives + "");
            if(!lives) {
                alert("GAME OVER");
                document.location.reload();
            }
            else {
                x2 = canvas.width/4;
                y2 = canvas.height-20;
                dx2 = 4;
                dy2 = -4;
                paddleX = (canvas.width-paddleWidth)/2;
            }
        }
    }
    if(x3 + dx3 > canvas.width-ballRadius || x3 + dx3 < ballRadius) {
        dx3 = -dx3;
    }
    if(y3 + dy3 < ballRadius) {
        dy3 = -dy3;
    }
    else if(y3 + dy3 > canvas.height-ballRadius) {
        if(x3 > paddleX && x3 < paddleX + paddleWidth) {
            dy3 = -dy3;
        }
        else {
            lives--;
            $('.lives').text("Lives: " + lives + "");
            if(!lives) {
                alert("GAME OVER");
                document.location.reload();
            }
            else {
                x3 = canvas.width/6;
                y3 = canvas.height-10;
                dx3 = 6;
                dy3 = -6;
                paddleX = (canvas.width-paddleWidth)/2;
            }
        }
    }
    
    if(rightPressed && paddleX < canvas.width-paddleWidth) {
        paddleX += 7;
    }
    else if(leftPressed && paddleX > 0) {
        paddleX -= 7;
    }
    
    x += dx;
    y += dy;
    x2 += dx2;
    y2 += dy2;
    x3 += dx3;
    y3 += dy3;
    if(currentLevel == 3) {
        requestAnimationFrame(drawLevel3);
    }
}
// draw();









</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="js/app.js"></script> 

</body>
</html>